# WikiSearch
Приложение для работы со статьями. Возможности:
 - Импорт статей из дампа (реализован в виде отдельного мини-приложения).
 - Поиск статей по названию и категории.
 - Добавление, удаление и модификация статей.
 - Вывод статистики по категориям (список категорий с количеством статей, принадлежащем каждой категории).
## Взаимодействие с БД
Приложение работает с СУБД Postgresql. Данные о БД задаются в виде системных переменных:
 - **WIKISEARCH_USERNAME** - имя пользователя, от лица которого приложение выполняет манипуляции с БД.
 - **WIKISEARCH_PASSWORD** - его пароль.
 - **WIKISEARCH_DATABASE** - название БД, используемой приложением.

Перед началом работы приложения необходимо запустить скрипт *init.sql* в корне проекта для создания таблиц, используемых приложением.
## Импорт данных
Приложение поддерживает импорт данных из дампа Википедии.
Для дампа необходимо запустить объект ImportMain, передав в качестве аргумента командной строки путь до дампа.
Запустив SBT в папке с проектом, нужно выполнить команду:

    runMain ru.skelantros.wikisearch.initdb.ImportMain "путь до дампа"
## Запуск приложения
Запустив SBT в папке с проектом, нужно выполнить команду:

    runMain ru.skelantros.wikisearch.Main
   
## Поддерживаемые HTTP-запросы
|Метод|Адрес|Описание
|--|--|--|
|GET|  /wiki/*title*[?isPretty=true/false]|Поиск статьи с названием *title* |
|GET | /wiki?category=*category*[,isPretty=true/false] | Поиск статей, входящих в категорию *category*
|GET | /categories| Статистика по категориям (название категорий и количество статей в них)
|POST|/wiki/*title*|Модификация статьи с названием *title* (можно изменить все параметры статьи, в т.ч. название, заданное как параметр new_title)
|DELETE|/wiki/*title*|Удаление статьи с названием *title*
|PUT|/wiki|Создание статьи с параметрами, указанными в отправленном JSON